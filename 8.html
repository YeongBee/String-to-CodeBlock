<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë¸”ë¡œê·¸ìš© ì½”ë“œ ë³€í™˜ê¸° (í…Œë§ˆ ë¯¸ë¦¬ë³´ê¸° í¬í•¨)</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <link id="theme-link" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/vs2015.min.css">
    
    <style>
        body { font-family: 'Segoe UI', sans-serif; padding: 20px; background: #f4f4f9; max-width: 1200px; margin: 0 auto; color: #333; }
        
        /* ì»¨íŠ¸ë¡¤ íŒ¨ë„ */
        .controls { 
            background: white; padding: 20px; border-radius: 12px; margin-bottom: 20px; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); 
            display: flex; gap: 15px; flex-wrap: wrap; align-items: flex-end;
        }
        
        .control-group { display: flex; flex-direction: column; gap: 5px; }
        label { font-size: 12px; font-weight: bold; color: #666; }
        
        select, input[type="text"], input[type="number"] { 
            padding: 10px; border-radius: 6px; border: 1px solid #ddd; 
            font-size: 14px; outline: none; height: 42px; box-sizing: border-box;
        }
        input[type="text"] { width: 180px; }
        input[type="number"] { width: 80px; }
        
        button { 
            padding: 0 25px; border-radius: 6px; border: none; font-weight: bold; 
            cursor: pointer; color: white; height: 42px; font-size: 14px;
        }
        #btn-convert { background: #007bff; }
        #btn-convert:hover { background: #0056b3; }
        #btn-copy { background: #28a745; }
        #btn-copy:hover { background: #218838; }
        
        /* ë©”ì¸ ì˜ì—­ */
        .container { display: flex; gap: 20px; height: 500px; margin-bottom: 40px; }
        .box { flex: 1; display: flex; flex-direction: column; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .box-header { padding: 12px 15px; background: #f8f9fa; font-weight: bold; color: #555; border-bottom: 1px solid #eee; }
        textarea { width: 100%; height: 100%; border: none; padding: 15px; resize: none; font-family: 'Consolas', monospace; font-size: 13px; outline: none; box-sizing: border-box; }
        
        #hidden-area { position: absolute; top: -9999px; visibility: hidden; }

        /* í…Œë§ˆ ë¯¸ë¦¬ë³´ê¸° ì„¹ì…˜ */
        .theme-preview-section {
            background: white; padding: 25px; border-radius: 12px; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }
        .theme-preview-section h2 { margin-top: 0; font-size: 20px; color: #444; margin-bottom: 20px; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        
        .theme-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }
        
        .theme-card {
            border: 1px solid #eee;
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.2s;
        }
        .theme-card:hover { transform: translateY(-5px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        
        .theme-image {
            width: 100%;
            height: 150px;
            object-fit: cover;
            background-color: #ddd;
            display: block;
        }
        
        .theme-info { padding: 12px; }
        .theme-name { font-weight: bold; font-size: 16px; margin-bottom: 5px; color: #333; }
        .theme-desc { font-size: 13px; color: #666; line-height: 1.4; }

        /* ë¯¸ë¦¬ë³´ê¸°ìš© ê°€ì§œ ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ (ì‹¤ì œ ì´ë¯¸ì§€ê°€ ì—†ì„ ë•Œ ìƒ‰ìƒìœ¼ë¡œ ëŒ€ì²´) */
        .preview-box { width: 100%; height: 150px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-family: monospace; font-size: 18px; }
    </style>
</head>
<body>

    <h1 style="text-align: center; color: #2c3e50;">Easy Code Block Generator</h1>
    
    <div class="controls">
        <div class="control-group">
            <label>ì–¸ì–´ (Language)</label>
            <select id="lang-select">
                <option value="java">Java</option>
                <option value="python">Python</option>
                <option value="javascript">JavaScript</option>
                <option value="sql">SQL</option>
                <option value="json">JSON</option>
                <option value="html">HTML</option>
                <option value="css">CSS</option>
                <option value="bash">Bash</option>
                <option value="cpp">C++</option>
                <option value="yaml">YAML</option>
            </select>
        </div>
        
        <div class="control-group">
            <label>í…Œë§ˆ (Theme)</label>
            <select id="theme-select" onchange="changeTheme()">
                <option value="vs2015">VS 2015 (Dark)</option>
                <option value="github">GitHub (Light)</option>
                <option value="monokai">Monokai (Dark)</option>
                <option value="atom-one-dark">Atom One Dark</option>
                <option value="dracula">Dracula</option>
                <option value="default">Default</option>
            </select>
        </div>

        <div class="control-group">
            <label>ì œëª© (Title)</label>
            <input type="text" id="title-input" placeholder="ì˜ˆ: Main.java">
        </div>

        <div class="control-group">
            <label>í°íŠ¸ (px)</label>
            <input type="number" id="font-size-input" value="14" min="10" max="30">
        </div>

        <button id="btn-convert" onclick="convertCode()">ë³€í™˜í•˜ê¸°</button>
        <button id="btn-copy" onclick="copyResult()">ê²°ê³¼ ë³µì‚¬</button>
    </div>

    <div class="container">
        <div class="box">
            <div class="box-header">1. ì†ŒìŠ¤ ì½”ë“œ ì…ë ¥</div>
            <textarea id="input-code" placeholder="ì½”ë“œë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”..."></textarea>
        </div>
        <div class="box">
            <div class="box-header">2. ë³€í™˜ëœ HTML ê²°ê³¼</div>
            <textarea id="output-html" readonly placeholder="ë³€í™˜ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ìƒì„±ë©ë‹ˆë‹¤."></textarea>
        </div>
    </div>

    <!-- í…Œë§ˆ ë¯¸ë¦¬ë³´ê¸° ì„¹ì…˜ -->
    <div class="theme-preview-section">
        <h2>ğŸ¨ í…Œë§ˆ ë¯¸ë¦¬ë³´ê¸° (Theme Previews)</h2>
        <div class="theme-grid">
            
            <div class="theme-card" onclick="selectTheme('vs2015')" style="cursor: pointer;">
                <div class="preview-box" style="background-color: #1E1E1E; color: #DCDCDC;">
                    <span style="color:#569CD6">public</span>&nbsp;<span style="color:#4EC9B0">Class</span>
                </div>
                <div class="theme-info">
                    <div class="theme-name">VS 2015 (Dark)</div>
                    <div class="theme-desc">Visual Studio ìŠ¤íƒ€ì¼ì˜ ë‹¤í¬ í…Œë§ˆ. ëˆˆì´ í¸ì•ˆí•˜ê³  ê°€ë…ì„±ì´ ë†’ìŠµë‹ˆë‹¤. (ê¸°ë³¸ê°’)</div>
                </div>
            </div>

            <div class="theme-card" onclick="selectTheme('github')" style="cursor: pointer;">
                <div class="preview-box" style="background-color: #F6F8FA; color: #24292E; border-bottom: 1px solid #e1e4e8;">
                    <span style="color:#D73A49">import</span>&nbsp;<span style="color:#6F42C1">React</span>
                </div>
                <div class="theme-info">
                    <div class="theme-name">GitHub (Light)</div>
                    <div class="theme-desc">GitHubì™€ ë™ì¼í•œ ë°ì€ í…Œë§ˆ. ê¹”ë”í•˜ê³  í°ìƒ‰ ë°°ê²½ ë¸”ë¡œê·¸ì— ì˜ ì–´ìš¸ë¦½ë‹ˆë‹¤.</div>
                </div>
            </div>

            <div class="theme-card" onclick="selectTheme('monokai')" style="cursor: pointer;">
                <div class="preview-box" style="background-color: #272822; color: #F8F8F2;">
                    <span style="color:#F92672">def</span>&nbsp;<span style="color:#A6E22E">func</span>()
                </div>
                <div class="theme-info">
                    <div class="theme-name">Monokai</div>
                    <div class="theme-desc">Sublime Textì˜ ìƒì§•ì ì¸ í…Œë§ˆ. ì±„ë„ê°€ ë†’ê³  ëŒ€ë¹„ê°€ ê°•ë ¬í•©ë‹ˆë‹¤.</div>
                </div>
            </div>

            <div class="theme-card" onclick="selectTheme('atom-one-dark')" style="cursor: pointer;">
                <div class="preview-box" style="background-color: #282C34; color: #ABB2BF;">
                    <span style="color:#C678DD">const</span>&nbsp;<span style="color:#61AFEF">App</span>
                </div>
                <div class="theme-info">
                    <div class="theme-name">Atom One Dark</div>
                    <div class="theme-desc">Atom ì—ë””í„°ì˜ ê¸°ë³¸ ë‹¤í¬ í…Œë§ˆ. ë¶€ë“œëŸ¬ìš´ íŒŒìŠ¤í…” í†¤ì´ íŠ¹ì§•ì…ë‹ˆë‹¤.</div>
                </div>
            </div>

            <div class="theme-card" onclick="selectTheme('dracula')" style="cursor: pointer;">
                <div class="preview-box" style="background-color: #282A36; color: #F8F8F2;">
                    <span style="color:#FF79C6">class</span>&nbsp;<span style="color:#50FA7B">Main</span>
                </div>
                <div class="theme-info">
                    <div class="theme-name">Dracula</div>
                    <div class="theme-desc">ë³´ë¼ìƒ‰ê³¼ í•‘í¬ìƒ‰ì´ ì–´ìš°ëŸ¬ì§„ ì¸ê¸° ë‹¤í¬ í…Œë§ˆ. íŠ¸ë Œë””í•œ ëŠë‚Œì„ ì¤ë‹ˆë‹¤.</div>
                </div>
            </div>

            <div class="theme-card" onclick="selectTheme('default')" style="cursor: pointer;">
                <div class="preview-box" style="background-color: #F0F0F0; color: #444;">
                    <span style="color:#880000; font-weight:bold">function</span>&nbsp;foo
                </div>
                <div class="theme-info">
                    <div class="theme-name">Default</div>
                    <div class="theme-desc">Highlight.js ê¸°ë³¸ í…Œë§ˆ. ê°€ì¥ ë¬´ë‚œí•˜ê³  ì‹¬í”Œí•©ë‹ˆë‹¤.</div>
                </div>
            </div>

        </div>
    </div>

    <div id="hidden-area">
        <pre><code id="temp-code"></code></pre>
    </div>

    <script>
        function changeTheme() {
            const theme = document.getElementById('theme-select').value;
            document.getElementById('theme-link').href = `https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/${theme}.min.css`;
        }
        
        // ì¹´ë“œ í´ë¦­ ì‹œ í…Œë§ˆ ì„ íƒ ê¸°ëŠ¥
        function selectTheme(themeName) {
            document.getElementById('theme-select').value = themeName;
            changeTheme();
            // í™”ë©´ ìƒë‹¨ìœ¼ë¡œ ìŠ¤í¬ë¡¤ ë¶€ë“œëŸ½ê²Œ ì´ë™
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function convertCode() {
            const input = document.getElementById('input-code').value;
            if (!input.trim()) { alert("ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."); return; }

            const lang = document.getElementById('lang-select').value;
            const title = document.getElementById('title-input').value.trim();
            const fontSize = document.getElementById('font-size-input').value;
            const tempCode = document.getElementById('temp-code');
            const hiddenArea = document.getElementById('hidden-area');

            // 1. í•˜ì´ë¼ì´íŒ…
            tempCode.textContent = input;
            tempCode.className = `language-${lang}`;
            tempCode.removeAttribute('data-highlighted');
            hljs.highlightElement(tempCode);

            // 2. ìŠ¤íƒ€ì¼ ì¶”ì¶œ
            const preStyle = window.getComputedStyle(hiddenArea.querySelector('pre'));
            const codeStyle = window.getComputedStyle(tempCode);
            let bgColor = codeStyle.backgroundColor;
            if (bgColor === 'rgba(0, 0, 0, 0)' || bgColor === 'transparent') bgColor = '#1e1e1e';
            const textColor = codeStyle.color;

            // 3. ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ ì ìš©
            tempCode.querySelectorAll('span').forEach(span => {
                const style = window.getComputedStyle(span);
                span.style.color = style.color;
                span.style.fontWeight = style.fontWeight;
                span.style.fontStyle = style.fontStyle;
                span.removeAttribute('class');
            });

            // 4. ì¤„ ë²ˆí˜¸ ìƒì„±
            const lines = input.split(/\r\n|\r|\n/);
            let lineNumbersHtml = '';
            for (let i = 1; i <= lines.length; i++) {
                lineNumbersHtml += `<div style="height: 1.5em;">${i}</div>`;
            }

            // 5. ì œëª© í—¤ë” ìƒì„±
            let headerHtml = '';
            if (title) {
                const titleSize = Math.max(12, fontSize - 1);
                headerHtml = `<div style="background-color: rgba(255, 255, 255, 0.1); padding: 8px 15px; border-bottom: 1px solid rgba(128, 128, 128, 0.2); font-family: sans-serif; font-size: ${titleSize}px; font-weight: bold; color: ${textColor}; opacity: 0.8;">${title}</div>`;
            }

            // 6. ìµœì¢… HTML ì¡°ë¦½
            const finalHtml = `<!-- ì½”ë“œ ë¸”ë¡ ì‹œì‘ -->
<div style="background-color: ${bgColor}; color: ${textColor}; border-radius: 8px; overflow: hidden; font-family: Consolas, 'Courier New', monospace; font-size: ${fontSize}px; margin: 20px 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
${headerHtml}
<div style="display: flex; align-items: flex-start; padding: 12px 0;">
<div style="user-select: none; -webkit-user-select: none; text-align: right; padding: 0 10px 0 15px; margin-right: 10px; border-right: 1px solid rgba(128, 128, 128, 0.3); color: gray; min-width: 30px; line-height: 1.5em; font-family: inherit;">
${lineNumbersHtml}
</div>
<div style="flex: 1; overflow-x: auto; padding-right: 12px;">
<pre style="margin: 0; font-family: inherit; line-height: 1.5em;">${tempCode.innerHTML}</pre>
</div>
</div>
</div>
<!-- ì½”ë“œ ë¸”ë¡ ë -->`;

            document.getElementById('output-html').value = finalHtml.trim();
        }

        function copyResult() {
            const outputText = document.getElementById('output-html');
            if (!outputText.value) { alert("ë¨¼ì € [ë³€í™˜í•˜ê¸°]ë¥¼ ì§„í–‰í•´ì£¼ì„¸ìš”."); return; }
            outputText.select();
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(outputText.value).then(() => alert('HTML ì½”ë“œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!')).catch(err => alert('ë³µì‚¬ ì‹¤íŒ¨: ' + err));
            } else {
                document.execCommand('copy');
                alert('HTML ì½”ë“œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            }
        }
        
        window.onload = function() {
            document.getElementById('input-code').value = 'public class HelloTheme {\n    public static void main(String[] args) {\n        System.out.println("Try clicking themes below!");\n    }\n}';
        }
    </script>
</body>
</html>
